C51 COMPILER V9.52.0.0   GSM                                                               04/10/2015 13:37:56 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE GSM
OBJECT MODULE PLACED IN gsm.OBJ
COMPILER INVOKED BY: G:\Program Files\Keil\C51\BIN\C51.EXE gsm.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          
   2          #include <REG51.H>               /* special function register declarations   */
   3          #include <stdio.h>               /* prototype declarations for I/O functions */
   4          #define LED P0                               //define prot P0 for LED
   5           
   6          void serial_init(void);
   7           
   8          unsigned int j;
   9          //Setup the serial port for 9600 baud at 11.0592MHz.
  10          //-------------------------------------------------
  11          void serial_init(void)
  12          {
  13   1         SCON = 0x50;                        /* SCON: mode 1, 8-bit UART, enable rcvr        */
  14   1         TMOD |= 0x20;               /* TMOD: timer 1, mode 2, 8-bit reload                   */
  15   1         TH1   = 0xFD;               /* TH1: reload value for 9600 baud @ 11.0592MHz*/
  16   1         TR1   = 1;                 /* TR1: timer 1 run                             */
  17   1         TI   = 1;                 /* TI:   set TI to send first char of UART          */
  18   1      }
  19           
  20           
  21          //Delay Routine start here
  22          void delay1(int n)
  23          {
  24   1         int i;
  25   1                  for(i=0;i<n;i++);
  26   1      }
  27           
  28          void delay2(int n)
  29          {
  30   1         int i;
  31   1                  for(i=0;i<n;i++)
  32   1                              delay1(1000);
  33   1      }
  34          void led_left()
  35          {
  36   1      for (j=0x01; j<=0x80; j<<=1)
  37   1                  {
  38   2         LED = j;
  39   2         delay1(1000);                    
  40   2         }
  41   1      }
  42           
  43          //-------------------------------------
  44          //                     Main program starts here
  45          //-------------------------------------
  46          void main(void)
  47          {
  48   1                  serial_init();                                                                                
             -                 //serial initialization
  49   1                  LED = 0x00; 
  50   1                  printf("AT+CMGF=1%c",13);                                         delay2(20);  //Text Mode    
             -        | hex value of 13 is 0x0D (CR )
  51   1                  printf("AT+CMGS=\"9600292363\"%c",13); delay2(20);           //Type your mobile number Eg : "9
             -884467058"
  52   1                  led_left();                 //scroll left
C51 COMPILER V9.52.0.0   GSM                                                               04/10/2015 13:37:56 PAGE 2   

  53   1                              delay1(20);
  54   1                  printf("Hi :-) GSM Modem Test");                     delay2(20);  //Type text as u want
  55   1                  printf("%c",0x1A);                                                             delay2(20);  //
             -line feed command
  56   1                                        
  57   1                  while(1);
  58   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    191    ----
   CONSTANT SIZE    =     60    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
