C51 COMPILER V9.52.0.0   8051_BASED_CAPACITANCE_METER                                      02/12/2015 12:54:22 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE 8051_BASED_CAPACITANCE_METER
OBJECT MODULE PLACED IN 8051 BASED CAPACITANCE METER.OBJ
COMPILER INVOKED BY: D:\C51\BIN\C51.EXE 8051 BASED CAPACITANCE METER.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <reg51.h>
   2          unsigned char j,n,t,DispBuf[4];
   3          unsigned int cap;
   4          unsigned char code
   5          BitTab[4]={0xbf,0xdf,0xef,0xf7};//Bit driver code
   6          unsigned char code
   7          DispTab[11]={0xfe,0x70,0xed,0xf9,0x73,0xdb,0xdf,0xf0,0xff,0xfb,0x40};//Font code
   8          sbit P1_2=P1^2;
   9          sbit P3_6=P3^6;
  10          main()        //Main program
  11          {    TMOD=0x11;//Timer T0, T1 are working in a regular way
  12   1          TH1=0xec;
  13   1          TL1=0x78;//T1 time is 5ms time
  14   1          IE=0X88; //Open break
  15   1          TR1=1;  //Open Timer T1
  16   1          for(;;)  //Infinite loop, timer interrupt return point
  17   1              ;
  18   1      }
  19          Timer1() interrupt 3//Timer interrupt service routine
  20          {    TH1=0xec;
  21   1          TL1=0x78;
  22   1          t=BitTab[j];//Take place value
  23   1          P1=P1|0x78;//P1.3-P1.6 get 1 free
  24   1          P1=P1&t;  //P1.3-P1.6 out of the bit value output
  25   1          t=DispBuf[j];//Remove the number to be displayed
  26   1          t=DispTab[t];//Code to take shape
  27   1          P3=t; //P3 output displayed by the font code
  28   1          j++;  //j as the digital control of the counter, value 0-3, display program which, through its recogni
             -zed display digital tube
  29   1          if(j==4)
  30   1          j=0;
  31   1          n++;
  32   1          if(n==48)//Every once in 48 break capacitance measurements
  33   1          {  
  34   2              n=0;
  35   2              TH0=0;
  36   2              TL0=0;
  37   2              P1_2=1;//Begin charging capacitor
  38   2              TR0=1; //Open Timer T0
  39   2              for(;P3_6==0;)//Determine whether the charging voltage reaches the reference voltage
  40   2                  ;
  41   2              TR0=0;//Charging voltage reaches the reference voltage, the timer T0 related
  42   2              P1_2=0;
  43   2              cap=TL0|(TH0<<8);//T0 timer values obtained in
  44   2              cap=cap-3;//Error correction
  45   2              if(cap>=2000)
  46   2              {
  47   3                  DispBuf[3]=10;
  48   3                  DispBuf[2]=10;
  49   3                  DispBuf[1]=10;
  50   3                  DispBuf[0]=1;  //Ultra range, the maximum display 1, the rest of you do not show (off)
  51   3              }
  52   2              if(cap<2000)  //Not exceed the range, take you value
  53   2              {
  54   3                    DispBuf[3]=cap%10;//Check digit
C51 COMPILER V9.52.0.0   8051_BASED_CAPACITANCE_METER                                      02/12/2015 12:54:22 PAGE 2   

  55   3                  cap=cap/10;
  56   3                  DispBuf[2]=cap%10;//Take 10 digits
  57   3                  cap=cap/10;
  58   3                  DispBuf[1]=cap%10;//Take 100 bits
  59   3                  DispBuf[0]=cap/10;//The median take 1000
  60   3              }
  61   2          }
  62   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    263    ----
   CONSTANT SIZE    =     15    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
