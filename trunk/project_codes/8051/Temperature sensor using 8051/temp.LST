C51 COMPILER V7.06   TEMP                                                                  11/08/2014 03:40:09 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE TEMP
OBJECT MODULE PLACED IN temp.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE temp.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          //Program to make a digital thermometer with display in centigrade scale
   2          
   3          #include<reg51.h>
   4          #define port P0
   5          #define adc_input P1
   6          #define dataport P2
   7          #define sec 100
   8          sbit rs = port^0;
   9          sbit rw = port^2;
  10          sbit e = port^1;
  11          
  12          sbit wr= port^3;
  13          sbit rd= port^4;
  14          sbit intr= port^5;
  15          
  16          int test_intermediate3=0, test_final=0,test_intermediate1[10],test_intermediate2[3]={0,0,0};
  17          
  18          void delay(unsigned int msec )
  19          {
  20   1      int i ,j ;
  21   1      for(i=0;i<msec;i++)
  22   1        for(j=0; j<1275; j++);
  23   1      }
  24          
  25          void lcd_cmd(unsigned char item)  //Function to send command to LCD
  26          {
  27   1      dataport = item;
  28   1      rs= 0;
  29   1      //rw=0;
  30   1      e=1;
  31   1      delay(1);
  32   1      e=0;
  33   1      return;
  34   1      }
  35          
  36          void lcd_data(unsigned char item) //Function to send data to LCD
  37          {
  38   1      dataport = item;
  39   1      rs= 1;
  40   1      //rw=0;
  41   1      e=1;
  42   1      delay(1);
  43   1      e=0;
  44   1      //delay(100);
  45   1      return;
  46   1      }
  47          
  48          void lcd_data_string(unsigned char *str)  // Function to send string to LCD
  49          {
  50   1      int i=0;
  51   1      while(str[i]!='\0')
  52   1      {
  53   2        lcd_data(str[i]);
  54   2        i++;
  55   2        delay(10);
C51 COMPILER V7.06   TEMP                                                                  11/08/2014 03:40:09 PAGE 2   

  56   2      }
  57   1      return;
  58   1      }
  59          
  60          void shape()     // Function to create the shape of degree
  61          {
  62   1      lcd_cmd(64);
  63   1      lcd_data(2);
  64   1      lcd_data(5);
  65   1      lcd_data(2);
  66   1      lcd_data(0);
  67   1      lcd_data(0);
  68   1      lcd_data(0);
  69   1      lcd_data(0);
  70   1      lcd_data(0);
  71   1      }
  72              
  73          void convert()    // Function to convert the values of ADC into numeric value to be sent to LCD
  74          {
  75   1      int s;
  76   1      test_final=test_intermediate3;
  77   1      lcd_cmd(0xc1);
  78   1      delay(2);
  79   1      lcd_data_string("TEMP:");
  80   1      s=test_final/100;
  81   1      test_final=test_final%100;
  82   1      lcd_cmd(0xc8);
  83   1      if(s!=0)
  84   1      lcd_data(s+48);
  85   1      else
  86   1      lcd_cmd(0x06);
  87   1      s=test_final/10;
  88   1      test_final=test_final%10;
  89   1      lcd_data(s+48);
  90   1      lcd_data(test_final+48);
  91   1      lcd_data(0);
  92   1      lcd_data('c');
  93   1      lcd_data(' ');
  94   1      delay(2);
  95   1      }
  96          
  97          void main()
  98          {
  99   1      int i,j;
 100   1      adc_input=0xff;
 101   1      lcd_cmd(0x38);
 102   1      lcd_cmd(0x0c);  //Display On, Cursor  Blinking
 103   1      delay(2);
 104   1      lcd_cmd(0x01);  // Clear Screen
 105   1      delay(2);
 106   1      
 107   1      while(1)
 108   1      {
 109   2      lcd_cmd(0xc1);
 110   2      delay(2);
 111   2      lcd_data_string("TEMP:");
 112   2      delay(2000);
 113   2      continue;
 114   2      
 115   2      for(j=0;j<3;j++)
 116   2        {
 117   3         for(i=0;i<10;i++)
C51 COMPILER V7.06   TEMP                                                                  11/08/2014 03:40:09 PAGE 3   

 118   3         {
 119   4          delay(1);
 120   4          rd=1;
 121   4          wr=0;
 122   4          delay(1);
 123   4          wr=1;
 124   4          while(intr==1);
 125   4          rd=0;
 126   4          lcd_cmd(0x88);
 127   4          test_intermediate1[i]=adc_input/10;
 128   4          delay(1);
 129   4          intr=1;
 130   4         }
 131   3         for(i=0;i<10;i++)
 132   3         test_intermediate2[j]=test_intermediate1[i]+test_intermediate2[j];
 133   3        }
 134   2      
 135   2      test_intermediate2[0]=test_intermediate2[0]/3;
 136   2      test_intermediate2[1]=test_intermediate2[1]/3;
 137   2      test_intermediate2[2]=test_intermediate2[2]/3;
 138   2      test_intermediate3=test_intermediate2[0]+test_intermediate2[1]+test_intermediate2[2];
 139   2      shape();
 140   2      convert();
 141   2      }
 142   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    330    ----
   CONSTANT SIZE    =      6    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     30       9
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
